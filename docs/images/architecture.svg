<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900" viewBox="0 0 1400 900" fill="none">
  <defs>
    <style>
      .bg { fill:#fbfdff; stroke:#e6eef8; }
      .panel { fill:#ffffff; stroke:#cbd5e1; stroke-width:1.5; rx:12; }
      .service { fill:#f8fafc; stroke:#93c5fd; stroke-width:1.2; rx:8; }
      .box { fill:#eff6ff; stroke:#bfdbfe; stroke-width:1.2; rx:10; }
      .title { font: 700 16px 'Segoe UI', Roboto, sans-serif; fill:#0b2447; }
      .label { font: 600 13px 'Segoe UI', Roboto, sans-serif; fill:#0f172a; }
      .meta { font: 400 12px 'Segoe UI', Roboto, sans-serif; fill:#334155; }
      .line { stroke:#64748b; stroke-width:2; marker-end:url(#arrow); fill:none; }
      code { font-family: monospace; font-size:11px; fill:#475569; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
      <path d="M0 0 L10 5 L0 10 z" fill="#64748b" />
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#000" flood-opacity="0.08" />
    </filter>
  </defs>

  <!-- Background -->
  <rect x="10" y="10" width="1380" height="880" rx="16" class="bg" />

  <!-- Users panel -->
  <g transform="translate(40,60)">
    <rect class="panel" x="0" y="0" width="240" height="220" filter="url(#shadow)" />
    <text class="title" x="18" y="28">Users</text>

    <g transform="translate(12,44)">
      <rect class="service" x="0" y="0" width="216" height="48"/>
      <text class="label" x="12" y="30">Student</text>

      <rect class="service" x="0" y="64" width="216" height="48"/>
      <text class="label" x="12" y="94">Teacher</text>

      <rect class="service" x="0" y="128" width="216" height="48"/>
      <text class="label" x="12" y="158">Admin</text>
    </g>
  </g>

  <!-- Frontend / Gateway -->
  <g transform="translate(320,60)">
    <rect class="box" x="0" y="0" width="360" height="120" filter="url(#shadow)" />
    <text class="title" x="18" y="30">Frontend / API Gateway</text>
    <text class="meta" x="18" y="56">Authenticate · Proxy · Rate-limit</text>

    <g transform="translate(18,76)">
      <rect class="service" x="0" y="0" width="320" height="28"/>
      <text class="meta" x="12" y="20">UI / Static assets / Reverse proxy</text>
    </g>
  </g>

  <!-- Backend / Runtime cluster -->
  <g transform="translate(720,40)">
    <rect x="0" y="0" width="640" height="820" class="panel" filter="url(#shadow)" />
    <text class="title" x="18" y="30">Backend Services & Runtime</text>

    <!-- Services row -->
    <g transform="translate(24,54)">
      <rect class="service" x="0" y="0" width="228" height="90"/>
      <text class="label" x="14" y="28">Auth Service</text>
      <text class="meta" x="14" y="50">JWT · Roles · Refresh · First-login flow</text>

      <rect class="service" x="244" y="0" width="228" height="90"/>
      <text class="label" x="258" y="28">User Service</text>
      <text class="meta" x="258" y="50">Profile · Subjects · RBAC</text>

      <rect class="service" x="488" y="0" width="120" height="90"/>
      <text class="label" x="500" y="28">Admin API</text>
      <text class="meta" x="500" y="50">Manage templates · Health</text>
    </g>

    <!-- Storage row -->
    <g transform="translate(24,160)">
      <rect class="service" x="0" y="0" width="300" height="86"/>
      <text class="label" x="16" y="28">MongoDB</text>
      <text class="meta" x="16" y="50">Users / Subjects / Score / Metadata</text>

      <rect class="service" x="340" y="0" width="276" height="86"/>
      <text class="label" x="356" y="28">MinIO (S3)</text>
      <text class="meta" x="356" y="50">Submission & Course files</text>
    </g>

    <!-- Container runtime cluster -->
    <g transform="translate(24,270)">
      <rect class="box" x="0" y="0" width="592" height="520"/>
      <text class="label" x="14" y="28">Container Runtime Cluster (Docker nodes)</text>

      <!-- Template pool -->
      <rect class="service" x="24" y="56" width="160" height="420"/>
      <text class="meta" x="36" y="92">Image Templates</text>
      <text class="meta" x="36" y="112">(per-subject templates)</text>

      <!-- Student containers col A -->
      <rect class="service" x="210" y="56" width="150" height="120"/>
      <text class="meta" x="222" y="86">Student Container</text>
      <text class="meta" x="222" y="106">(session-1)</text>

      <rect class="service" x="210" y="192" width="150" height="120"/>
      <text class="meta" x="222" y="222">Student Container</text>
      <text class="meta" x="222" y="242">(session-2)</text>

      <!-- Student containers col B -->
      <rect class="service" x="390" y="56" width="160" height="120"/>
      <text class="meta" x="402" y="86">Student Container</text>
      <text class="meta" x="402" y="106">(session-3)</text>

      <rect class="service" x="390" y="192" width="160" height="120"/>
      <text class="meta" x="402" y="222">Student Container</text>
      <text class="meta" x="402" y="242">(session-4)</text>

      <!-- Orchestrator & Proxy -->
      <rect class="service" x="24" y="352" width="160" height="120"/>
      <text class="meta" x="36" y="382">Orchestrator</text>
      <text class="meta" x="36" y="402">(create / stop / scale)</text>

      <rect class="service" x="210" y="352" width="340" height="120"/>
      <text class="meta" x="222" y="382">Proxy / Port-forward</text>
      <text class="meta" x="222" y="402">(expose container endpoint to student)</text>
    </g>
  </g>

  <!-- Connections -->
  <path class="line" d="M260 140 L320 140" />
  <text class="meta" x="200" y="136">Login / Access</text>

  <path class="line" d="M680 120 L744 120" />
  <text class="meta" x="520" y="110">Authenticate</text>

  <path class="line" d="M640 160 L784 160" />
  <text class="meta" x="520" y="156">User / Subjects APIs</text>

  <path class="line" d="M825 144 L540 214" />
  <text class="meta" x="680" y="190">Auth checks / User lookup</text>

  <path class="line" d="M920 160 L640 214" />

  <path class="line" d="M950 200 L720 214" />
  <text class="meta" x="820" y="200">Store / Retrieve files</text>

  <path class="line" d="M980 240 L760 380" />
  <text class="meta" x="840" y="300">Request container start / status</text>

  <path class="line" d="M840 130 L760 400" />

  <path class="line" d="M900 560 L980 420" />

  <!-- Legend -->
  <g transform="translate(40,720)">
    <rect class="panel" x="0" y="0" width="380" height="140" />
    <text class="label" x="14" y="26">Legend</text>
    <text class="meta" x="14" y="52">• Auth Service: token & roles</text>
    <text class="meta" x="14" y="74">• User Service: profile, subjects, RBAC</text>
    <text class="meta" x="14" y="96">• Container Cluster: per-student containers, templates, orchestrator</text>
  </g>

  <text class="meta" x="460" y="845">Created for README — save as <tspan font-family=\"monospace\">docs/images/architecture.svg</tspan></text>
</svg>
