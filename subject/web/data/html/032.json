{
  "url": "https://www.w3schools.com/html/html5_geolocation.asp",
  "title": "HTML ",
  "content": [
    {
      "type": "heading",
      "level": 1,
      "text": "HTML Geolocation API"
    },
    {
      "type": "other",
      "text": "❮ Previous\nNext ❯"
    },
    {
      "type": "paragraph",
      "text": "The Geolocation API is used to get the user's current location."
    },
    {
      "type": "heading",
      "level": 2,
      "text": "Locate the User's Position"
    },
    {
      "type": "paragraph",
      "text": "The Geolocation API is used to access the user's current location."
    },
    {
      "type": "paragraph",
      "text": "Since this can compromise privacy, the location is not available unless the user approves it."
    },
    {
      "type": "paragraph",
      "text": "Try It"
    },
    {
      "type": "other",
      "text": "var x=document.getElementById(\"demo\");\nfunction getLocation()\n  {\n  if (navigator.geolocation)\n    {\n    navigator.geolocation.getCurrentPosition(showPosition,showError);\n    }\n  else{x.innerHTML=\"Geolocation is not supported by this browser.\";}\n  }\n\nfunction showPosition(position)\n  {\n  var lat=position.coords.latitude;\n  var lon=position.coords.longitude;\n  var latlon=new google.maps.LatLng(lat, lon)\n  var mapholder=document.getElementById('mapholder')\n  mapholder.style.height='250px';\n  mapholder.style.width='100%';\n\n  var myOptions={\n  center:latlon,zoom:14,\n  mapTypeId:google.maps.MapTypeId.ROADMAP,\n  mapTypeControl:false,\n  navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}\n  };\n  var map=new google.maps.Map(document.getElementById(\"mapholder\"),myOptions);\n  var marker=new google.maps.Marker({position:latlon,map:map,title:\"You are here!\"});\n  }\n\nfunction showError(error)\n  {\n  switch(error.code) \n    {\n    case error.PERMISSION_DENIED:\n      x.innerHTML=\"User denied the request for Geolocation.\"\n      break;\n    case error.POSITION_UNAVAILABLE:\n      x.innerHTML=\"Location information is unavailable.\"\n      break;\n    case error.TIMEOUT:\n      x.innerHTML=\"The request to get user location timed out.\"\n      break;\n    case error.UNKNOWN_ERROR:\n      x.innerHTML=\"An unknown error occurred.\"\n      break;\n    }\n  }"
    },
    {
      "type": "other",
      "text": "Note: The Geolocation API is only available on secure contexts such as HTTPS.\nTip: The Geolocation API is most accurate for devices with GPS, like smartphones or smartwatches."
    },
    {
      "type": "heading",
      "level": 2,
      "text": "Browser Support"
    },
    {
      "type": "paragraph",
      "text": "The numbers in the table specify the first browser version that fully supports \nGeolocation."
    },
    {
      "type": "table",
      "data": [
        [
          "API",
          "",
          "",
          "",
          "",
          ""
        ],
        [
          "Geolocation",
          "5.0",
          "12.0",
          "3.5",
          "5.0",
          "10.6"
        ]
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": "Using HTML Geolocation API"
    },
    {
      "type": "paragraph",
      "text": "The Geolocation API is accessed via a call to \nnavigator.geolocation. This will cause the browser to ask the user for \npermission to access their location data. If the user accept, the browser will \nsearch for the best available functionality on the device to access this \ninformation (for example GPS)."
    },
    {
      "type": "paragraph",
      "text": "The getCurrentPosition() method is used to return the user's \ncurrent location."
    },
    {
      "type": "paragraph",
      "text": "The example below returns the latitude and longitude of the user's current \nlocation:"
    },
    {
      "type": "example",
      "description": "",
      "codes": [
        {
          "language": "html",
          "code": "<script>const x = document.getElementById(\"demo\");\nfunction getLocation() {  if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(success, error);  } else {\n      x.innerHTML = \"Geolocation is not supported by this browser.\";\n    }}\n function success(position) {  x.innerHTML = \"Latitude: \" + position.coords.latitude +   \"<br>Longitude: \" + position.coords.longitude; \n }function error() {  alert(\"Sorry, no position available.\");\n  }</script>"
        }
      ]
    },
    {
      "type": "paragraph",
      "text": "Example explained:"
    },
    {
      "type": "other",
      "text": "Check if Geolocation is supported\n  If Geolocation is supported, run the getCurrentPosition() method. If not, display a message to the user\n  The success() function outputs the user's location in latitude and longitude\n  The error() function alerts a text if the browser retrieves an error in getCurrentPosition()"
    },
    {
      "type": "heading",
      "level": 2,
      "text": "Error Handling and Rejections"
    },
    {
      "type": "paragraph",
      "text": "The second parameter of the getCurrentPosition() method is used to handle \nerrors. It specifies a function to run if it fails to get the user's location."
    },
    {
      "type": "paragraph",
      "text": "Here is an example of a more specific error handling:"
    },
    {
      "type": "example",
      "description": "",
      "codes": [
        {
          "language": "javascript",
          "code": "function error(error) {  switch(error.code) {    case error.PERMISSION_DENIED:\n        x.innerHTML = \"User denied the request for Geolocation.\"\n        break;    case error.POSITION_UNAVAILABLE:\n        x.innerHTML = \"Location information is unavailable.\"      break;    case error.TIMEOUT:\n        x.innerHTML = \"The request to get user location timed out.\"\n        break;    case error.UNKNOWN_ERROR:      x.innerHTML = \"An unknown error occurred.\"      break;\n    }\n }"
        }
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": "Location-specific Information"
    },
    {
      "type": "paragraph",
      "text": "Geolocation is also very useful for location-specific information, like:"
    },
    {
      "type": "other",
      "text": "Up-to-date local information\n  Showing Points-of-interest near the user\n  Turn-by-turn navigation (GPS)"
    },
    {
      "type": "heading",
      "level": 2,
      "text": "The getCurrentPosition() Method - Return Data"
    },
    {
      "type": "paragraph",
      "text": "The getCurrentPosition() method returns an object on success. The latitude, \nlongitude and accuracy properties are always returned. The other properties are returned \nif available:"
    },
    {
      "type": "table",
      "data": [
        [
          "Property",
          "Returns"
        ],
        [
          "coords.latitude",
          "The latitude as a decimal number (always returned)"
        ],
        [
          "coords.longitude",
          "The longitude as a decimal number (always returned)"
        ],
        [
          "coords.accuracy",
          "The accuracy of position (always returned)"
        ],
        [
          "coords.altitude",
          "The altitude in meters above the mean sea level (returned if available)"
        ],
        [
          "coords.altitudeAccuracy",
          "The altitude accuracy of position (returned if available)"
        ],
        [
          "coords.heading",
          "The heading as degrees clockwise from North (returned if available)"
        ],
        [
          "coords.speed",
          "The speed in meters per second (returned if available)"
        ],
        [
          "timestamp",
          "The date/time of the response (returned if available)"
        ]
      ]
    },
    {
      "type": "heading",
      "level": 2,
      "text": "Geolocation Object - Other interesting Methods"
    },
    {
      "type": "paragraph",
      "text": "The Geolocation object also has other interesting methods:"
    },
    {
      "type": "other",
      "text": "watchPosition() - Returns the current \n  location of the user and continues to \nreturn updated location as the user moves (like the GPS in a car).\n  clearWatch() - Stops the watchPosition() method."
    },
    {
      "type": "paragraph",
      "text": "The example below shows the watchPosition() method. You need an accurate GPS device to test this (like \na \nsmartphone):"
    },
    {
      "type": "example",
      "description": "",
      "codes": [
        {
          "language": "html",
          "code": "<script>const x = document.getElementById(\"demo\");\nfunction getLocation() {\n    if (navigator.geolocation) {    navigator.geolocation.watchPosition(success, \n  error);  } else {\n      x.innerHTML = \"Geolocation is not supported by this browser.\";\n    }}\n function success(position) {  x.innerHTML = \"Latitude: \" + position.coords.latitude +   \"<br>Longitude: \" + position.coords.longitude; \n }function error(error) {  switch(error.code) {    \n  case error.PERMISSION_DENIED:      x.innerHTML = \n  \"User denied the request for Geolocation.\"      \n  break;    case error.POSITION_UNAVAILABLE:      \n  x.innerHTML = \"Location information is unavailable.\"      \n  break;    case error.TIMEOUT:      \n  x.innerHTML = \"The request to get user location timed out.\"      \n  break;    case error.UNKNOWN_ERROR:      \n  x.innerHTML = \"An unknown error occurred.\"      \n  break;  }}</script>"
        }
      ]
    },
    {
      "type": "other",
      "text": "❮ Previous\nNext ❯"
    },
    {
      "type": "other",
      "text": "★\n\n      +1\n    \n  \n\n  \n   \n\n  \n    \n      \n        Track your progress - it's free!\n        \n          \n                 \n          \n        \n      \n    \n\n    \n      \n        \n          Log in\n        \n\n        \n          Sign Up"
    },
    {
      "type": "list",
      "ordered": false,
      "items": [
        "Check if Geolocation is supported",
        "If Geolocation is supported, run the getCurrentPosition() method. If not, display a message to the user",
        "The success() function outputs the user's location in latitude and longitude",
        "The error() function alerts a text if the browser retrieves an error in getCurrentPosition()"
      ]
    },
    {
      "type": "list",
      "ordered": false,
      "items": [
        "Up-to-date local information",
        "Showing Points-of-interest near the user",
        "Turn-by-turn navigation (GPS)"
      ]
    },
    {
      "type": "list",
      "ordered": false,
      "items": [
        "watchPosition() - Returns the current \n  location of the user and continues to \nreturn updated location as the user moves (like the GPS in a car).",
        "clearWatch() - Stops the watchPosition() method."
      ]
    }
  ]
}